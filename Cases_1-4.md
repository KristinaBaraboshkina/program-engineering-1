# Лабораторная работа: SSH

**Дисциплина:** Программная инженерия

------------------------------------------------------------------------

## Содержание

1.  [Кейс 1: Настройка SSH-сервера](#кейс-1-настройка-ssh-сервера)
2.  [Кейс 2: Подключение к удалённому серверу
    по-ssh](#кейс-2-подключение-к-удалённому-серверу-по-ssh)
3.  [Кейс 3: Копирование файлов с помощью
    scp](#кейс-3-копирование-файлов-с-помощью-scp)
4.  [Кейс 4: Работа с ключами ssh](#кейс-4-работа-с-ключами-ssh)

------------------------------------------------------------------------

# Кейс 1: Настройка SSH-сервера

### Цель

Установить и запустить SSH-сервер на виртуальной машине Ubuntu.

### Выполненные шаги

1.  Устанавливаем SSH-сервер:

    ``` bash
    sudo apt update
    sudo apt install openssh-server
    ```

2.  Проверяем статус службы:

    ``` bash
    sudo systemctl status ssh
    ```

3.  Убеждаемся, что SSH слушает порт 22:

    ``` bash
    sudo ss -tlnp | grep ssh
    ```

### Результат

SSH-сервер установлен, запущен и доступен на порту **22**.

------------------------------------------------------------------------

# Кейс 2: Подключение к удалённому серверу по SSH

### Цель

Выполнить SSH-подключение к виртуальной машине с хоста (Windows).

### Выполненные шаги

1.  В VirtualBox включаем сетевой адаптер:

        Settings → Network → Adapter 1 → NAT

2.  Настраиваем проброс порта:

        Name: ssh
        Host Port: 2222
        Guest Port: 22
        Protocol: TCP

3.  Узнаём IP внутри Ubuntu:

    ``` bash
    ip a
    ```

4.  Подключаемся из PowerShell:

    ``` powershell
    ssh kristina@localhost -p 2222
    ```

### Результат

Удалённое SSH-подключение успешно установлено.

------------------------------------------------------------------------

# Кейс 3: Копирование файлов с помощью SCP

### Цель

Передать файл *на удалённый сервер* и *обратно на локальную машину*.

### Выполненные шаги

1.  Копируем файл **с локальной машины → на виртуальную**:

    ``` powershell
    scp -P 2222 C:\Users\barab\Desktop\example.txt kristina@localhost:/home/kristina/
    ```

2.  Копируем файл **с виртуальной машины → на локальную**:

    ``` powershell
    scp -P 2222 kristina@localhost:/home/kristina/example.txt C:\Users\barab\Desktop\
    ```

### Результат

Файл успешно скопирован в обоих направлениях.

------------------------------------------------------------------------

# Кейс 4: Работа с ключами SSH

### Цель

Сгенерировать SSH-ключ и настроить безпарольный вход.

### Выполненные шаги

1.  Генерируем ключи на локальном компьютере:

    ``` powershell
    ssh-keygen -t ed25519
    ```

    В каталоге `~/.ssh` появляются:

        id_ed25519
        id_ed25519.pub

2.  Копируем публичный ключ на сервер:

    ``` powershell
    scp -P 2222 C:\Users\barab\.ssh\id_ed25519.pub kristina@localhost:/home/kristina/
    ```

3.  На сервере добавляем ключ:

    ``` bash
    mkdir -p ~/.ssh
    cat id_ed25519.pub >> ~/.ssh/authorized_keys
    chmod 700 ~/.ssh
    chmod 600 ~/.ssh/authorized_keys
    ```

4.  Подключаемся без пароля:

    ``` powershell
    ssh -i C:\Users\barab\.ssh\id_ed25519 kristina@localhost -p 2222
    ```

### Результат

Подключение работает **по ключу**, без ввода пароля.

------------------------------------------------------------------------

# Итог

В результате были выполнены:

✔ Установка и настройка SSH-сервера\
✔ SSH-подключение через проброс порта\
✔ Передача файлов через SCP\
✔ Настройка SSH-ключей и беспарольного входа

------------------------------------------------------------------------
